function fetchESimData() {
    const idInput = document.getElementById('idInput').value.trim();
    if (!idInput) {
        alert('Molimo unesite ID kartice.');
        return;
    }

    const url = `https://esim.sm/api/reseller/v1/esim`;
    const myHeaders = new Headers();
    const requestOptions = {
        method: 'GET',
        headers: myHeaders,
        redirect: 'follow'
    };

    fetch(url, requestOptions)
        .then(response => response.json())
        .then(result => {
            const data = result.data;
            const foundCard = data.find(card => card.id.toString() === idInput);

            const resultDiv = document.getElementById('result');
            if (foundCard) {
                resultDiv.innerHTML = `
                    <h2>Podaci za karticu:</h2>
                    <p><strong>ID:</strong> ${foundCard.id}</p>
                    <p><strong>Status:</strong> ${foundCard.statusLabel}</p>
                    <p><strong>Plan:</strong> ${foundCard.plan.name}</p>
                    <p><strong>Preostalo MB:</strong> ${foundCard.mbTotal - foundCard.mbUsed} MB</p>
                    <p><strong>Datum isteka:</strong> ${foundCard.expirationTimestamp}</p>
                    <p><strong>Cena:</strong> ${foundCard.plan.price} ${foundCard.plan.currency}</p>
                `;
            } else {
                resultDiv.innerHTML = '<p>eSIM kartica sa unetim ID-om nije pronađena.</p>';
            }
        })
        .catch(error => {
            console.log('Greška pri preuzimanju podataka:', error);
            document.getElementById('result').innerHTML = '<p>Došlo je do greške prilikom preuzimanja podataka.</p>';
        });
}